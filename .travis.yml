language: generic

#Tell Travis super user pemissions are needed
sudo: required

#Tell Travis what services are needed
services:
  - docker

#Tell Travis what to run before build
before_install:
  - docker build -t jeevakalaiselvam/docker-cicd-react-github-travis-aws -f Dockerfile.dev .

#Tell travel how to run the test for react application
script:
  - docker run -e CI=true jeevakalaiselvam/docker-cicd-react-github-travis-aws npm run test

#Travis CI config for AWS
deploy:
  deploy:
  provider: elasticbeanstalk
  access_key_id:
    secure: "Encrypted <access-key-id>="
  secret_access_key:
    secure: "Encypted <secret-access-key>="
  region: "ap-south-1"
  app: "docker-cicd-react-github-travis-aws"
  env: "Dockercicdreactgithubtravisaws-env"
  bucket_name: "elasticbeanstalk-ap-south-1-852844134094"

